"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.commitResponses=exports.del=exports.put=exports.patch=exports.post=exports.get=exports.call=void 0;let reqId=0;const requests=new Map;exports.call=(async(e,t,s,r,o={retry:{timeout:3e4,tempts:1,delay:1e3,incremental:2}},p)=>{const l=new Promise((o,p)=>{requests.set(reqId,{resolve:o,reject:p,timeoutId:void 0}),e.send(JSON.stringify({t:0,i:reqId,u:s,m:t,d:r})),reqId++});return await Promise.race([l])}),exports.get=exports.call,exports.post=exports.call,exports.patch=exports.call,exports.put=exports.call,exports.del=exports.call,exports.commitResponses=(({i:e,u:t,d:s,s:r})=>{if(!requests.has(e))return;const{resolve:o,reject:p,timeoutId:l}=requests.get(e);clearTimeout(l),r>199&&r<400?o(s):p({url:t,status:r,data:s}),requests.delete(e)});